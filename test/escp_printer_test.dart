import 'package:escp_printer/escp_printer.dart';
import 'package:test/test.dart';

void main() {
  group('A group of tests', () {
    setUp(() {});

    test('Print All', () {
      final texts = [
        "[C]<u><font size='big'>ORDER NÂ°045</font></u>",
        "[L]",
        "[C]================================",
        "[L]",
        "[L]<b>BEAUTIFUL SHIRT</b>[R]9.99e",
        "[L]  + Size : S",
        "[L]",
        "[L]<b>AWESOME HAT</b>[R]24.99e",
        "[L]  + Size : 57/58",
        "[L]",
        "[C]--------------------------------",
        "[R]TOTAL PRICE :[R]34.98e",
        "[R]TAX :[R]4.23e",
        "[L]",
        "[C]================================",
        "[L]",
        "[L]<font size='big'>Customer :</font>",
        "[L]Raymond DUPONT",
        "[L]5 rue des girafes",
        "[L]31547 PERPETES",
        "[L]Tel : +33801201456",
      ];
      final ints = texts.expand((e) {
        return EscCommand.encode(text: e);
      });

      final expected = [
        [27, 64, 91, 67, 93, 60, 117, 62, 60, 102, 111, 110, 116, 32, 115, 105, 122, 101, 61, 39, 98, 105, 103, 39, 62, 79, 82, 68, 69, 82, 32, 78, 176, 48, 52, 53, 60, 47, 102, 111, 110, 116, 62, 60, 47, 117, 62, 10],
        [27, 64, 91, 76, 93, 10],
        [27, 64, 91, 67, 93, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 10],
        [27, 64, 91, 76, 93, 10],
        [27, 64, 91, 76, 93, 60, 98, 62, 66, 69, 65, 85, 84, 73, 70, 85, 76, 32, 83, 72, 73, 82, 84, 60, 47, 98, 62, 91, 82, 93, 57, 46, 57, 57, 101, 10],
        [27, 64, 91, 76, 93, 32, 32, 43, 32, 83, 105, 122, 101, 32, 58, 32, 83, 10],
        [27, 64, 91, 76, 93, 10],
        [27, 64, 91, 76, 93, 60, 98, 62, 65, 87, 69, 83, 79, 77, 69, 32, 72, 65, 84, 60, 47, 98, 62, 91, 82, 93, 50, 52, 46, 57, 57, 101, 10],
        [27, 64, 91, 76, 93, 32, 32, 43, 32, 83, 105, 122, 101, 32, 58, 32, 53, 55, 47, 53, 56, 10],
        [27, 64, 91, 76, 93, 10],
        [27, 64, 91, 67, 93, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 10],
        [27, 64, 91, 82, 93, 84, 79, 84, 65, 76, 32, 80, 82, 73, 67, 69, 32, 58, 91, 82, 93, 51, 52, 46, 57, 56, 101, 10],
        [27, 64, 91, 82, 93, 84, 65, 88, 32, 58, 91, 82, 93, 52, 46, 50, 51, 101, 10],
        [27, 64, 91, 76, 93, 10],
        [27, 64, 91, 67, 93, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 10],
        [27, 64, 91, 76, 93, 10],
        [27, 64, 91, 76, 93, 60, 102, 111, 110, 116, 32, 115, 105, 122, 101, 61, 39, 98, 105, 103, 39, 62, 67, 117, 115, 116, 111, 109, 101, 114, 32, 58, 60, 47, 102, 111, 110, 116, 62, 10],
        [27, 64, 91, 76, 93, 82, 97, 121, 109, 111, 110, 100, 32, 68, 85, 80, 79, 78, 84, 10],
        [27, 64, 91, 76, 93, 53, 32, 114, 117, 101, 32, 100, 101, 115, 32, 103, 105, 114, 97, 102, 101, 115, 10],
        [27, 64, 91, 76, 93, 51, 49, 53, 52, 55, 32, 80, 69, 82, 80, 69, 84, 69, 83, 10],
        [27, 64, 91, 76, 93, 84, 101, 108, 32, 58, 32, 43, 51, 51, 56, 48, 49, 50, 48, 49, 52, 53, 54, 10],
      ].expand((e) => e);

      expect(ints, expected);
    });
  });
}
